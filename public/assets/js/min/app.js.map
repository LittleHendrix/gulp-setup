{"version":3,"sources":["app.js"],"names":["$","document","ready","updateViewportSize","vWidth","$myWindow","width","vHeight","height","updateScrollPosition","vScrollTop","scrollTop","forwarding","trigger","isScrolledIntoView","elem","$el","jQuery","variant","Math","floor","docViewTop","elemTop","offset","top","elemBottom","FastClick","attach","body","colorbox","iframe","innerWidth","innerHeight","maxWidth","$panels","$forwardlinks","panelTotal","length","curPanel","scrollPos","$displayPanes","find","window","$myDocument","isTouch","is","Modernizr","touch","navigator","maxTouchPoints","msMaxTouchPoints","evt","browser","platform","name","toLowerCase","iOS","os","family","iOS7","parseInt","version","iOS8","$floatNav","$navSwitch","dtl","autoScrolling","eventhandler","e","preventDefault","documentElement","className","product","on","arg","stopPropagation","bind","unbind","foundation","toggleClass","each","i","$this","this","eq","offsetTop","animate","duration","queue","done","lavanav","loadDriveSlider","$panel","slidesLoaded","$preloader","addClass","get","data","children","driveSliderInstance","addSlide","$slides","css","$cue","fadeIn","off","$driveSlider","flexslider","animation","animationLoop","slideshow","allowOneSlide","useCSS","start","after","fadeOut","pos","hasClass","flexAnimate","hideDisplaySlider","$popup","$popupTrigger","$card","$closeBtn","$close","add","$displaySlider","displaySliderInstance","index","controlNav","directionNav","startAt","slides","distance","margin-top","margin-right","target","overlay","hover","TweenLite","to","opacity","scale","ease","Power2","easeInOut","loadCarImg","carModel","$sl","slider","oldCarModel","carsloaded","$cars","removeClass","invisible","$carpark","visible","curCarPos","end","$data","appendTo","filter","value","$carHolder","$modelSwitcher","curCarModel","max","event","ui","hash","slice","completeHandler","stageReady","reverseCompleteHandler","timeScale","prepareDashStage","isActive","progress","kill","play","$bubbles","$dashSlider","dashSliderInstance","TimelineLite","paused","onComplete","onReverseComplete","staggerTo","autoAlpha","Elastic","easeIn","easeOut","bubbles","$items","htls","prepareHardwareStage","len","oldTarget","$lnks","disclaimer","disclaimer2","$extra","$hardwareSlider","hardwareSliderInstance","imgs","imgTotal","bubTotal","infograph","childTl","onCompleteParams","delay","push","t","undefined","reverse","empty","append","ttls","bubReverseCompleteHandler","ttlsBub","prepareTechStage","carloaded","carTween","$baseImgs","sliderInit","techSliderInstance","$techSlider","bubChildTl","parent","fn","leftPos","newWidth","that","$lava","$curElement","position","left","stop"],"mappings":"AAAAA,EAAEC,UAAUC,MAAM,WAwEjB,QAASC,KACRC,EAASC,EAAUC,QACnBC,EAAUF,EAAUG,SAGrB,QAASC,KACRC,EAAaL,EAAUM,YAClBC,GACJP,EAAUQ,QAAQ,qBAAsB,IAI1C,QAASC,GAAmBC,GAC3B,GAAIC,GAAMD,YAAgBE,QAASF,EAAOf,EAAEe,GACxCG,EAAUC,KAAKC,MAAOb,EAAU,GAEhCc,EAAaX,EAAaQ,EAC1BI,EAAUN,EAAIO,SAASC,IACvBC,EAAaH,EAAUN,EAAIR,SAAoB,EAARU,CAE3C,OAASG,IAAcC,GAA2BG,GAAdJ,EAzFrCK,UAAUC,OAAO1B,SAAS2B,MAE1B5B,EAAE,aAAa6B,UACdC,QAAQ,EACRC,WAAY,IACZC,YAAa,IACbC,SAAU,OAGX,IAAIC,GAAUlC,EAAE,UACfmC,EAAgBnC,EAAE,cAAekC,GACjCE,EAAaF,EAAQG,OACrBC,EAAW,EACXC,EAAY,EAGZC,EAAgBxC,EAAE,YAAYyC,KAAK,YAEnCpC,EAAYL,EAAE0C,QACdC,EAAc3C,EAAEC,UAChBG,EAASC,EAAUC,QACnBC,EAAUF,EAAUG,SACpBE,EAAaL,EAAUM,YAEvBiC,GADQ5C,EAAE,QAAQ6C,GAAG,YACXC,UAAUC,OAASC,UAAUC,eAAiB,GAAKD,UAAUE,iBAAmB,GAG1FC,EAAM,QACNC,EAAUC,SAASC,KAAKC,cACxBC,EAA4B,OAAtBH,SAASI,GAAGC,OAClBC,EAA8B,OAAtBN,SAASI,GAAGC,QAAwD,GAArCE,SAASP,SAASI,GAAGI,QAAS,IAAY,SAAW,GAC5FC,EAA8B,OAAtBT,SAASI,GAAGC,QAAmBE,SAASP,SAASI,GAAGI,QAAS,KAAO,EAAK,SAAW,GAC5FE,EAAY/D,EAAE,aACdgE,EAAahE,EAAE,YAEfiE,GADYjE,EAAE,eACR,MAENkE,GAAgB,EAChBtD,GAAa,EACbuD,EAAe,SAASC,GACvBA,EAAEC,iBAIJpE,UAASqE,gBAAgBC,WAAa,IAAMnB,EACxCI,IACHvD,SAASqE,gBAAgBC,WAAa,QAAUZ,EAAOG,EAAOT,SAASmB,QAAQjB,eAGhFlD,EAAUoE,GAAG,2BAA2BtE,GAAoBsE,GAAG,SAAShE,GAExEkC,EAAY8B,GAAG,kBAAmB,SAASL,EAAGM,GAC7CN,EAAEO,kBACED,EACH/B,EAAYiC,KAAK,YAAaT,GAE9BxB,EAAYkC,OAAO,YAAaV,KAIlC9D,EAAUoE,GAAG,mBAAoB,SAASL,EAAGM,GAG3CR,EADGQ,GACa,GAEA,IA2BlB1E,EAAEC,UAAU6E,aAEZd,EAAWS,GAAGtB,EAAK,SAASiB,GAG3B,MAFAA,GAAEO,kBACFZ,EAAUgB,YAAY,SACf,IAGR5C,EAAc6C,KAAK,SAASC,GAC3B,GAAIC,GAAQlF,EAAEmF,KACdD,GAAMT,GAAGtB,EAAK,SAASiB,GA4BtB,MA3BAA,GAAEO,kBAGFtE,EAAUQ,QAAQ,qBAAsB,IACxCD,GAAa,EACb0B,EAAW2C,EAAE,EACb1C,EAAY0C,EAAE,GAAK7C,EAAa,EAAIF,EAAQkD,GAAGH,EAAE,GAAG,GAAGI,UAMvDrF,EAAE,aAAasF,SAEb3E,UAAW4B,IAGXgD,SAAU,IACVC,OAAO,EACPC,KAAM,WACLpF,EAAUQ,QAAQ,qBAAsB,IACxCD,GAAa,MAMT,MAITZ,EAAE,YAAY0F,WAEI,WA0EjB,QAASC,KACJ7E,EAAmB8E,KAAYC,GAAgBjD,IAAYsB,IAE9D4B,EAAWC,SAAS,WACpBF,GAAe,EACf7F,EAAEgG,IAAI,eACHP,KAAK,SAASQ,GACdjG,EAAEiG,GAAMC,WAAWlB,KAAK,WACvBmB,EAAoBF,KAAK,cAAcG,SAASjB,QAEjDnF,EAAEC,UAAU6E,WAAW,cAAe,UACtCuB,EAAQC,IAAI,UAAU,GACtBR,EAAWC,SAAS,UACpBQ,EAAKC,OAAO,KAEZnG,EAAUoG,IAAI,eACdzG,EAAE,qCAAqCyG,IAAI,kBAzFhD,GAAIb,GAAS5F,EAAE,gBACd0G,EAAe1G,EAAE,eACjBqG,EAAUrG,EAAE,UAAU0G,GAAcJ,IAAI,UAAU,GAClDT,GAAe,EACfC,EAAaF,EAAOnD,KAAK,cACzB8D,EAAOX,EAAOnD,KAAK,QAEhB0D,EAAsBO,EAAaC,YACtCC,UAAW,QACXC,eAAe,EACfC,WAAW,EACXC,eAAe,EACfC,QAAQ,EACRC,MAAO,WACDpB,GACJ7F,EAAEC,UAAU6E,WAAW,cAAe,WAErCoC,MAAO,WACLX,EAAK1D,GAAG,aACX0D,EAAKY,QAAQ,OAwBZvE,IACH+C,IAEDtF,EAAUoE,GAAG,8BAA+BkB,GAE5C3F,EAAE,mCAAmCyE,GAAGtB,EAAI,cAAe,IAAK,SAASiB,GACxEA,EAAEO,iBACF,IAAIO,GAAQlF,EAAEmF,KAoBd,OAnBKU,KAEJC,EAAWC,SAAS,WACpBF,GAAe,EACf7F,EAAEgG,IAAI,eACHP,KAAK,SAASQ,GACdjG,EAAEiG,GAAMC,WAAWlB,KAAK,WACvBmB,EAAoBF,KAAK,cAAcG,SAASjB,OAEjD,IAAIiC,GAAOlC,EAAMmC,SAAS,aAAgB,EAAIrH,EAAEiG,GAAMC,WAAW7D,MAEjErC,GAAEC,UAAU6E,WAAW,cAAe,UACtCuB,EAAQC,IAAI,UAAU,GACtBR,EAAWC,SAAS,UACpBI,EAAoBF,KAAK,cAAcqB,YAAYF,GAAK,KAE3DpH,EAAEmF,MAAMsB,IAAI,eACZpG,EAAUoG,IAAI,iBAER,MAyBT,IAAK7D,EAeJ,EAAoB,WAgBnB,QAAS2E,KACHzG,EAAmB8E,KACvB4B,EAAOL,QAAQ,KACfxE,EAAY9B,QAAQ,oBAAqB,KAlB3C,GAAI+E,GAAS5F,EAAE,YACdyH,EAAgBzH,EAAE,WAAY4F,GAC9B4B,EAASxH,EAAE,SAAU4F,GACrB8B,EAAQ1H,EAAE,QAASwH,GAAQlB,IAAI,aAAa,UAC5CqB,EAAY3H,EAAE,SAAUwH,GACxBI,EAASD,EAAUE,IAAIL,GACvBjB,EAAOvG,EAAE,OAAQwH,GACjBM,EAAiB9H,EAAE,eAAgB4F,GACnCwB,EAAM,EACNW,EAAwB,IAEzBR,KAEAlH,EAAUoE,GAAG,SAAU8C,GASvBE,EAAczC,KAAK,SAASgD,GAC3B,GAAI9C,GAAQlF,EAAEmF,KACdD,GAAMT,GAAGtB,EAAK,WAIb,GAHAiE,EAAMY,EACNR,EAAOhB,OAAO,KACd7D,EAAY9B,QAAQ,oBAAqB,IACZ,MAAzBkH,EACHA,EAAwBD,EAAenB,YACtCC,UAAW,QACXqB,YAAY,EACZC,cAAc,EACdrB,eAAe,EACfC,WAAW,EACXqB,QAASf,EACTH,MAAO,WACNS,EAAMpB,IAAI,aAAa,UACvB,IAAI8B,GAASN,EAAerF,KAAK,aAChC4F,EAAWD,EAAO5H,SAAS,CAC5B4H,GAAO9B,IAAI,aAAc,IAAI+B,EAAS,MACtCV,EAAUrB,KACTgC,aAAc,KAAKD,EAAW,IAAI,KAClCE,eAAgB,KAAKH,EAAO3F,KAAK,mBAAmBnC,QAAQ,EAAI,IAAI,QAGtE4G,MAAO,WACNX,EAAKY,QAAQ,YAGT,CAENY,EAAsB9B,KAAK,cAAcqB,YAAYF,GAAK,EAC1D,IAAIgB,GAASN,EAAerF,KAAK,aAChC4F,EAAWD,EAAO5H,SAAS,CAC5B4H,GAAO9B,IAAI,aAAc,IAAI+B,EAAS,MACtCV,EAAUrB,KACTgC,aAAc,KAAKD,EAAW,IAAI,KAClCE,eAAgB,KAAKH,EAAO3F,KAAK,mBAAmBnC,QAAQ,EAAI,IAAI,YAMxEsH,EAAOnD,GAAGtB,EAAK,SAASiB,GAMvB,MALAA,GAAEO,mBACE3E,EAAEoE,EAAEoE,QAAQ3F,GAAG,eAAiB7C,EAAEoE,EAAEoE,QAAQ3F,GAAG,wBAClD2E,EAAOL,QAAQ,KACfxE,EAAY9B,QAAQ,oBAAqB,MAEnC,YApFT2B,GAAcwC,KAAK,WAClB,GAAIE,GAAQlF,EAAEmF,MACbsD,EAAUzI,EAAE,aAAakF,EAE1BA,GAAMwD,MAAM,WACXC,UAAUC,GAAGH,EAAS,IAAMnC,KAAKuC,QAAQ,EAAGC,MAAM,KAAMC,KAAKC,OAAOC,aAClE,WACFN,UAAUC,GAAGH,EAAS,IAAMnC,KAAKuC,QAAQ,EAAGC,MAAM,GAAIC,KAAKC,OAAOC,iBAkFrD,WA+Bf,QAASC,GAAWC,GAEnBC,EAAIC,OAAO,WACXvD,EAAWC,SAAS,WAEpBuD,EAAcH,EAETI,GAiBJC,EAAMC,YAAY,UAAUC,YAC5BF,EAAQxJ,EAAE,IAAImJ,EAAUQ,GAAUC,UAAUxE,GAAGyE,GAAW9D,SAAS,UAAU+D,MAC7EV,EAAIC,OAAO,YAlBXE,GAAa,EACbvJ,EAAEgG,IAAI,aACJP,KAAK,SAASQ,GACd,GAAI8D,GAAQ/J,EAAE,QAAUiG,EAAO,SAG/BuD,GAAQxJ,EAAE,MAAO+J,GAAOC,SAASL,GAAUD,YAAYO,OAAO,IAAId,GAAUS,UAAUxE,GAAG,GAAGW,SAAS,UAAU+D,MAG/GhE,EAAWC,SAAS,UACpBqD,EAAIC,OAAO,UACXD,EAAIC,QAAQa,MAAM,IAElBlK,EAAEC,UAAU6E,WAAW,cAAe,aAnD1C,GAAIyE,IAAa,EAChBY,EAAanK,EAAE,SACf2J,EAAW3J,EAAE,YACb8F,EAAaqE,EAAW1H,KAAK,cAC7B2H,EAAiBpK,EAAE,gBAAgByC,KAAK,eACxC4H,EAAc,QACdf,EAAc,GACdE,EAAQxJ,IACR6J,EAAY,EAETT,EAAMpJ,EAAE,eAAeqJ,QACzBiB,IAAK,KACH7F,GAAG,QAAS,SAAW8F,EAAOC,GAChCX,EAAY1I,KAAKC,MAAMoJ,EAAGN,MAAQ,IAClCV,EAAMC,YAAY,UAAUrE,GAAGyE,GAAW9D,SAAS,YACjDtB,GAAG,aAAc,WACd8E,GACJL,EAAWmB,IAIdD,GAAe3F,GAAGtB,EAAK,WAMtB,MALAkH,GAAclF,KAAKsF,KAAKC,MAAM,GAE1BL,GAAef,GAClBJ,EAAWmB,IAEL,OAoCQ,WA2BhB,QAASM,KACRC,GAAa,EAGd,QAASC,KACR1F,KAAK2F,UAAU,GAGhB,QAASC,KACJ7G,GAECD,EAAI+G,YAAgC,GAAlB/G,EAAIgH,aACzBhH,EAAIiH,OAGDpK,EAAmB8E,GACjBgF,GAEJ3G,EAAIkH,OAGDP,IAQHpD,EAAOL,QAAQ,KACfxE,EAAY9B,QAAQ,oBAAqB,IACzC+J,GAAa,GAzDjB,GAAIhF,GAAS5F,EAAE,cAEdoL,EAAWxF,EAAOnD,KAAK,WACvB+E,EAAS5B,EAAOnD,KAAK,UACrBiF,EAAQF,EAAO/E,KAAK,SAAS6D,IAAI,aAAa,UAC9CqB,EAAYH,EAAO/E,KAAK,UACxBmF,EAASD,EAAUE,IAAIL,GACvBjB,EAAOiB,EAAO/E,KAAK,QACnB4I,EAAczF,EAAOnD,KAAK,gBAC1B2E,EAAM,EACNkE,EAAqB,KACrBV,GAAa,CAEb3G,GAAM,GAAIsH,eACTC,QAAQ,EACRC,WAAYd,EACZe,kBAAoBb,IAGrB5G,EAAI0H,UAAUP,EAAU,IAAMQ,UAAU,EAAG9C,MAAM,KAAMC,KAAK8C,QAAQC,QAAS,IAC7E7H,EAAI0H,UAAUP,EAAU,IAAMtC,MAAM,EAAGC,KAAK8C,QAAQE,SAAU,GAAK,SAEpEhB,IAEA1K,EAAUoE,GAAG,mBAAoBsG,GAuCjCK,EAASpG,KAAK,SAASgD,GACtB,GAAI9C,GAAQlF,EAAEmF,KACdD,GAAMT,GAAGtB,EAAK,WAOb,GANAiE,EAAMY,EAENR,EAAOhB,OAAO,KAEd7D,EAAY9B,QAAQ,oBAAqB,IAEf,MAAtByK,EACHA,EAAqBD,EAAY1E,YAChCC,UAAW,QACXqB,YAAY,EACZC,cAAc,EACdrB,eAAe,EACfC,WAAW,EACXqB,QAASf,EACTH,MAAO,WACNS,EAAMpB,IAAI,aAAa,UACvB,IAAI8B,GAASiD,EAAY5I,KAAK,aAC7B4F,EAAWD,EAAO5H,SAAS,CAC5B4H,GAAO9B,IAAI,aAAc,IAAI+B,EAAS,MACtCV,EAAUrB,KACTgC,aAAc,KAAKD,EAAW,IAAI,KAClCE,eAAgB,KAAKH,EAAO3F,KAAK,mBAAmBnC,QAAQ,EAAI,IAAI,QAGtE4G,MAAO,WACNX,EAAKY,QAAQ,YAGT,CACNmE,EAAmBrF,KAAK,cAAcqB,YAAYF,GAAK,EACvD,IAAIgB,GAASiD,EAAY5I,KAAK,aAC7B4F,EAAWD,EAAO5H,SAAS,CAC5B4H,GAAO9B,IAAI,aAAc,IAAI+B,EAAS,MACtCV,EAAUrB,KACTgC,aAAc,KAAKD,EAAW,IAAI,KAClCE,eAAgB,KAAKH,EAAO3F,KAAK,mBAAmBnC,QAAQ,EAAI,IAAI,OAGtE,OAAO,MAITsH,EAAOnD,GAAGtB,EAAK,SAASiB,GACvBA,EAAEO,mBACE3E,EAAEoE,EAAEoE,QAAQ3F,GAAG,eAAiB7C,EAAEoE,EAAEoE,QAAQ3F,GAAG,wBAElD2E,EAAOL,QAAQ,KAEfxE,EAAY9B,QAAQ,oBAAqB,UAMvB,WA4DpB,QAAS8J,GAAgBqB,GACxBA,EAAQjG,SAAS,UACjB6E,GAAa,EAGd,QAASC,KACR1F,KAAK2F,UAAU,GACf3F,KAAK+F,OACgB,mBAAV1C,IAEVyD,EAAOxC,YAAY,UAAUrE,GAAGoD,GAAQzC,SAAS,UAElDmG,EAAK1D,GAAQ2C,OAOd,QAASgB,KACR,GAAIjI,EAEH,IAAK,GAAIe,GAAI,EAAGmH,EAAMF,EAAK7J,OAAY+J,EAAJnH,EAASA,KACvCiH,EAAKjH,GAAG+F,YAAoC,GAAtBkB,EAAKjH,GAAGgG,aACjCiB,EAAKjH,GAAGiG,WAKNpK,GAAmBd,EAAE,cACnB4K,GAEJsB,EAAKG,GAAWlB,OAGbP,IAKHpD,EAAOL,QAAQ,KACfxE,EAAY9B,QAAQ,oBAAqB,IACzC+J,GAAa,GArGjB,GAECpC,GAFG8D,EAAQtM,EAAE,mBAAmByC,KAAK,KACrCwJ,EAASjM,EAAE,aAAayC,KAAK,SAE7B4J,EAAY,EACZE,EAAa,GACbC,EAAc,GACdC,EAASzM,EAAE,UACX4K,GAAa,EACbhF,EAAS5F,EAAE,aACXyH,EAAgB7B,EAAOnD,KAAK,WAC5B+E,EAAS5B,EAAOnD,KAAK,UACrBiF,EAAQF,EAAO/E,KAAK,SAAS6D,IAAI,aAAa,UAC9CqB,EAAYH,EAAO/E,KAAK,UACxBmF,EAASD,EAAUE,IAAIL,GACvBjB,EAAOiB,EAAO/E,KAAK,QACnBiK,EAAkB9G,EAAOnD,KAAK,gBAC9B2E,EAAM,EACNuF,EAAyB,KACzBT,IAEDD,GAAOjH,KAAK,WACX,GAAIE,GAAQlF,EAAEmF,MACbyH,EAAO1H,EAAMzC,KAAK,YAClBoK,EAAWD,EAAKvK,OAChB2J,EAAU9G,EAAMzC,KAAK,WACrBqK,EAAWd,EAAQ3J,OACnB0K,EAAY7H,EAAMzC,KAAK,cAEpBuK,EAAU,GAAIzB,eACbC,QAAQ,EACRC,WAAYd,EACZsC,kBAAoBjB,GACpBN,kBAAmBb,GAGnBrH,IAA4C,GAArCI,SAASP,SAASI,GAAGI,QAAS,KAA8C,UAAlCR,SAASmB,QAAQjB,gBAClEsJ,EAAW,EACdG,EAAQrB,UAAUiB,EAAM,IAAKhB,UAAU,EAAG9C,MAAM,GAAI,IAEpDkE,EAAQpE,GAAGgE,EAAM,IAAKhB,UAAU,EAAG9C,MAAM,KAIvCgE,EAAW,GACdE,EAAQrB,UAAUK,EAAS,IAAMJ,UAAU,EAAG9C,MAAM,KAAMC,KAAK8C,QAAQC,QAAS,IAChFkB,EAAQrB,UAAUK,EAAS,IAAMlD,MAAM,EAAGC,KAAK8C,QAAQE,SAAU,MAC5DnJ,GAAWxC,GAAU,MACzB4M,EAAQrB,UAAUoB,EAAW,IAAMnB,UAAU,GAAI,MAGlDoB,EAAQnF,IAAKc,UAAUC,GAAGoD,EAAS,IAAMJ,UAAU,EAAG9C,MAAM,KAAMC,KAAK8C,QAAQC,UAC/EkB,EAAQnF,IAAKc,UAAUC,GAAGoD,EAAS,IAAMlD,MAAM,EAAGC,KAAK8C,QAAQE,QAASmB,MAAM,QACzEtK,GAAWxC,GAAU,MACzB4M,EAAQnF,IAAKc,UAAUC,GAAGmE,EAAW,IAAMnB,UAAU,GAAI,MAG3DM,EAAKiB,KAAKH,KAkBXb,IAEA9L,EAAUoE,GAAG,mBAAoB0H,GA+BjCG,EAAMtH,KAAK,SAASC,GACnB,GAAIC,GAAQlF,EAAEmF,MACbiI,EAAIjI,KAAKsF,KAAKC,MAAM,EAErBxF,GAAMT,GAAGtB,EAAK,SAASiB,GAmBtB,MAlBAA,GAAEO,kBAEF4H,EAA4Cc,QAA/BrN,EAAE,IAAIoN,GAAGnH,KAAK,cAA6B,GAAKjG,EAAE,IAAIoN,GAAGnH,KAAK,cAC3EuG,EAAkDa,QAApCrN,EAAE,IAAIoN,GAAGnH,KAAK,mBAAkC,GAAKjG,EAAE,IAAIoN,GAAGnH,KAAK,mBAEjFuC,EAASvD,EACLuD,GAAU6D,IACbH,EAAKG,GAAWvB,UAAU,GAC1BoB,EAAKG,GAAWiB,UAEhBjB,EAAY7D,EAEZiE,EAAOc,QAAQC,OAAOjB,GACH,IAAfC,IACHA,EAAc,SAAWA,EACzBC,EAAOe,OAAOhB,MAGT,MAIL5J,IACH6E,EAAczC,KAAK,SAASgD,GAC3B,GAAI9C,GAAQlF,EAAEmF,KACdD,GAAMT,GAAGtB,EAAK,SAASiB,GAEtB,OADAA,EAAEO,kBACMqD,GACP,IAAK,GACJZ,EAAM,CACN,MACD,KAAK,GACJA,EAAM,CACN,MACD,KAAK,GACJA,EAAM,CACN,MACD,KAAK,GACJA,EAAM,CACN,MACD,KAAK,GACJA,EAAM,CACN,MACD,KAAK,GACJA,EAAM,CACN,MACD,SACCA,EAAM,EAIR,GAAa,KAAThH,EAIH,GAHAoH,EAAOhB,OAAO,KACd7D,EAAY9B,QAAQ,oBAAqB,IAEX,MAA1B8L,EACHA,EAAyBD,EAAgB/F,YACxCC,UAAW,QACXqB,YAAY,EACZC,cAAc,EACdrB,eAAe,EACfC,WAAW,EACXqB,QAASf,EACTH,MAAO,WACNS,EAAMpB,IAAI,aAAa,UACvB,IAAI8B,GAASsE,EAAgBjK,KAAK,aACjC4F,EAAWD,EAAO5H,SAAS,CAC5B4H,GAAO9B,IAAI,aAAc,IAAI+B,EAAS,MACtCV,EAAUrB,KACTgC,aAAc,KAAKD,EAAW,IAAI,KAClCE,eAAgB,KAAKH,EAAO3F,KAAK,mBAAmBnC,QAAQ,EAAI,IAAI,QAGtE4G,MAAO,WACNX,EAAKY,QAAQ,YAGT,CACNwF,EAAuB1G,KAAK,cAAcqB,YAAYF,GAAK,EAC3D,IAAIgB,GAASsE,EAAgBjK,KAAK,aACjC4F,EAAWD,EAAO5H,SAAS,CAC5B4H,GAAO9B,IAAI,aAAc,IAAI+B,EAAS,MACtCV,EAAUrB,KACTgC,aAAc,KAAKD,EAAW,IAAI,KAClCE,eAAgB,KAAKH,EAAO3F,KAAK,mBAAmBnC,QAAQ,EAAI,IAAI,OAIvE,OAAO,MAITsH,EAAOnD,GAAGtB,EAAK,SAASiB,GAMvB,MALAA,GAAEO,mBACE3E,EAAEoE,EAAEoE,QAAQ3F,GAAG,eAAiB7C,EAAEoE,EAAEoE,QAAQ3F,GAAG,wBAClD2E,EAAOL,QAAQ,KACfxE,EAAY9B,QAAQ,oBAAqB,MAEnC,QAMa,WA2DtB,QAAS8J,KACRC,GAAa,EAGd,QAASC,KACR1F,KAAK2F,UAAU,GACf3F,KAAK+F,OACgB,mBAAV1C,IAEVyD,EAAOxC,YAAY,UAAUrE,GAAGoD,GAAQzC,SAAS,UAElD0H,EAAKjF,GAAQ2C,OAGd,QAASuC,KACRvI,KAAK2F,UAAU,GACf3F,KAAK+F,OACgB,mBAAV1C,IAEVyD,EAAOxC,YAAY,UAAUrE,GAAGoD,GAAQzC,SAAS,UAElD4H,EAAQnF,GAAQ2C,OAOjB,QAASyC,KACR,GAAI1J,EACH,GAAKtB,EAOJ,IAAK,GAAIqC,GAAI,EAAGmH,EAAMuB,EAAQtL,OAAY+J,EAAJnH,EAASA,KAC1C0I,EAAQ1I,GAAG+F,YAAuC,GAAzB2C,EAAQ1I,GAAGgG,aACvC0C,EAAQ1I,GAAGiG,WARb,KAAK,GAAIjG,GAAI,EAAGmH,EAAMqB,EAAKpL,OAAY+J,EAAJnH,EAASA,KACvCwI,EAAKxI,GAAG+F,YAAoC,GAAtByC,EAAKxI,GAAGgG,aACjCwC,EAAKxI,GAAGiG,WAWPpK,GAAmB8E,GACjBgF,IAECiD,GAAerK,GAA4C,GAArCI,SAASP,SAASI,GAAGI,QAAS,KAA8C,UAAlCR,SAASmB,QAAQjB,gBACrFuK,EAAWnF,UAAUC,GAAGmF,EAAW,IAAMnC,UAAU,EAAG9C,MAAM,EAAGC,KAAKC,OAAOC,aAEvErG,EAGJ+K,EAAQtB,GAAWlB,OAFnBsC,EAAKpB,GAAWa,MAAM,GAAG/B,QAMvBP,IAEa,MAAZkD,GAA2C,GAAvBA,EAAS7C,YAChC6C,EAAS5C,OAaV1D,EAAOL,QAAQ,KACfxE,EAAY9B,QAAQ,oBAAqB,IACzC+J,GAAa,GAqDjB,QAASoD,GAAW5G,GAGnB,GAFAI,EAAOhB,OAAO,KACd7D,EAAY9B,QAAQ,oBAAqB,IACf,MAAtBoN,EACHA,EAAqBC,EAAYvH,YAChCC,UAAW,QACXqB,YAAY,EACZC,cAAc,EACdrB,eAAe,EACfC,WAAW,EACXqB,QAASf,EACTH,MAAO,WACNS,EAAMpB,IAAI,aAAa,UACvB,IAAI8B,GAAS8F,EAAYzL,KAAK,aAC7B4F,EAAWD,EAAO5H,SAAS,CAC5B4H,GAAO9B,IAAI,aAAc,IAAI+B,EAAS,MACtCV,EAAUrB,KACTgC,aAAc,KAAKD,EAAW,IAAI,KAClCE,eAAgB,KAAKH,EAAO3F,KAAK,mBAAmBnC,QAAQ,EAAI,IAAI,QAGtE4G,MAAO,WACNX,EAAKY,QAAQ,YAGT,CAEN8G,EAAmBhI,KAAK,cAAcqB,YAAYF,GAAK,EACvD,IAAIgB,GAAS8F,EAAYzL,KAAK,aAC7B4F,EAAWD,EAAO5H,SAAS,CAC5B4H,GAAO9B,IAAI,aAAc,IAAI+B,EAAS,MACtCV,EAAUrB,KACTgC,aAAc,KAAKD,EAAW,IAAI,KAClCE,eAAgB,KAAKH,EAAO3F,KAAK,mBAAmBnC,QAAQ,EAAI,IAAI,QA3NvE,GAGCkI,GAHG8D,EAAQtM,EAAE,eAAeyC,KAAK,KACjCwJ,EAASjM,EAAE,eAAeyC,KAAK,SAC/BsL,EAAY/N,EAAE,eAAeyC,KAAK,YAElC4J,EAAY,EACZzB,GAAa,EACbiD,GAAY,EACZjI,EAAS5F,EAAE,eACXoL,EAAWxF,EAAOnD,KAAK,WACvB+E,EAAS5B,EAAOnD,KAAK,UACrBiF,EAAQF,EAAO/E,KAAK,SAAS6D,IAAI,aAAa,UAC9CqB,EAAYH,EAAO/E,KAAK,UACxBmF,EAASD,EAAUE,IAAIL,GACvBjB,EAAOiB,EAAO/E,KAAK,QACnByL,EAActI,EAAOnD,KAAK,gBAC1B2E,EAAM,EACN6G,EAAqB,KACrBH,EAAW,KACXL,KACAE,IAED1B,GAAOjH,KAAK,WACX,GAAIE,GAAQlF,EAAEmF,KACd,IAAKvC,EAaE,CACN,GAAIoJ,GAAU9G,EAAMzC,KAAK,WACzBqK,EAAWd,EAAQ3J,OAEf8L,EAAa,GAAI5C,eACfC,QAAQ,EACRC,WAAYd,EACZe,kBAAmBgC,GAGrBZ,GAAW,GACdqB,EAAWxC,UAAUK,EAAS,IAAMJ,UAAU,EAAG9C,MAAM,KAAMC,KAAK8C,QAAQC,QAAS,IACnFqC,EAAWxC,UAAUK,EAAS,IAAMlD,MAAM,EAAGC,KAAK8C,QAAQE,SAAU,MAEpEoC,EAAWtG,IAAKc,UAAUC,GAAGoD,EAAS,IAAMJ,UAAU,EAAG9C,MAAM,KAAMC,KAAK8C,QAAQC,UAClFqC,EAAWtG,IAAKc,UAAUC,GAAGoD,EAAS,IAAMlD,MAAM,EAAGC,KAAK8C,QAAQE,QAASmB,MAAM,OAGlFS,EAAQR,KAAKgB,OA/BA,CAEb,GAAIpB,GAAY7H,EAAMzC,KAAK,cAEvBuK,EAAU,GAAIzB,eACbC,QAAQ,EACRC,WAAYd,EACZe,kBAAmBb,GAGxBmC,GAAQrB,UAAUoB,EAAW,IAAMnB,UAAU,GAAI,IAEjD6B,EAAKN,KAAKH,MA+CZY,IAEAvN,EAAUoE,GAAG,mBAAoBmJ,GAuDjCtB,EAAMtH,KAAK,SAASC,GACnB,CAAA,GAAIC,GAAQlF,EAAEmF,KACTA,MAAKsF,KAAKC,MAAM,GAErBxF,EAAMT,GAAGtB,EAAK,SAASiB,GAiBtB,MAhBAA,GAAEO,kBACFyC,EAAMlC,EAAMkJ,SAASpG,QAErBQ,EAASvD,EACLuD,GAAU6D,IAERzJ,GAIJ+K,EAAQtB,GAAWvB,UAAU,GAC7B6C,EAAQtB,GAAWiB,YAJnBG,EAAKpB,GAAWvB,UAAU,GAC1B2C,EAAKpB,GAAWiB,WAMjBjB,EAAY7D,IAEN,MAITZ,EAAOnD,GAAGtB,EAAK,SAASiB,GAMvB,MALAA,GAAEO,mBACE3E,EAAEoE,EAAEoE,QAAQ3F,GAAG,eAAiB7C,EAAEoE,EAAEoE,QAAQ3F,GAAG,wBAClD2E,EAAOL,QAAQ,KACfxE,EAAY9B,QAAQ,oBAAqB,MAEnC,IAGJ+B,GACHwI,EAASpG,KAAK,SAASgD,GACtB,GAAI9C,GAAQlF,EAAEmF,KAEdD,GAAMT,GAAGtB,EAAK,SAASiB,GAItB,MAHAA,GAAEO,kBACFqJ,EAAWhG,IAEJ,WA+CZhI,EAAEqO,GAAG3I,QAAU,WACd,MAAOP,MAAKH,KAAK,WAChB,GAAIhE,GACHsN,EACAC,EACAC,EAAOxO,EAAEmF,MACTmH,EAAQtM,EAAE,IAAIwO,EAEfA,GAAKhB,OAAO,sBACZ,IAAIiB,GAAQzO,EAAE,QAAQwO,EAEtB,IAAIxO,EAAE,WAAYwO,GAAMnM,OAAS,EAAG,CACnC,GAAIqM,GAAc1O,EAAE,WAAYwO,GAAMJ,QACtCK,GAAMnO,MAAMoO,EAAYpO,SACtBgG,IAAI,OAAQoI,EAAYC,WAAWC,MACnC3I,KAAK,WAAYyI,EAAYC,WAAWC,MACxC3I,KAAK,YAAayI,EAAYpO,aAEhCmO,GAAMnO,MAAM,GAAGgG,IAAI,OAAQ,GAAGL,KAAK,WAAY,GAAGA,KAAK,YAAa,EAGrEqG,GAAM7H,GAAG,QAAS,SAASL,GAU1B,MATAA,GAAEO,kBACF2H,EAAM7C,YAAY,UAAUQ,OAAOjK,EAAEmF,OAAOY,SAAS,UACrD/E,EAAMhB,EAAEmF,MAAMiJ,SACdE,EAAUtN,EAAI2N,WAAWC,KACzBL,EAAWvN,EAAIV,QACfmO,EAAMI,OAAOvJ,SACZsJ,KAAMN,EACNhO,MAAOiO,GACN,MACK,OAmBVvO,EAAEqO,GAAGzE,QAAU,WACd,MAAOzE,MAAKmB,IAAI,aAAc,YAE/BtG,EAAEqO,GAAG3E,UAAY,WAChB,MAAOvE,MAAKmB,IAAI,aAAc","file":"app.js","sourcesContent":["$(document).ready(function(){\r\n\r\n\t// document.addEventListener(\"touchmove\", function(e){ e.preventDefault(); }, false);\r\n\tFastClick.attach(document.body);\r\n\t\r\n\t$('a.youtube').colorbox({\r\n\t\tiframe: true,\r\n\t\tinnerWidth: 640,\r\n\t\tinnerHeight: 390,\r\n\t\tmaxWidth: '80%'\r\n\t});\r\n\r\n\tvar $panels = $('.panel'),\r\n\t\t$forwardlinks = $('.next-panel', $panels),\r\n\t\tpanelTotal = $panels.length,\r\n\t\tcurPanel = 0,\r\n\t\tscrollPos = 0,\r\n\t\tstartY = 0,\r\n\t\tdeltaY = 0,\r\n\t\t$displayPanes = $('#display').find('.colspan'),\r\n\t\tcurCarPos = 0,\r\n\t\t$myWindow = $(window),\r\n\t\t$myDocument = $(document),\r\n\t\tvWidth = $myWindow.width(),\r\n\t\tvHeight = $myWindow.height(),\r\n\t\tvScrollTop = $myWindow.scrollTop(),\r\n\t\toldIE = $('html').is('.lt-ie10'),\r\n\t\tisTouch = Modernizr.touch || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0,\r\n\t\t// evt = !isTouch ? 'tap' : 'click',\r\n\t\t// viewportEvt = Modernizr.deviceorientation ? 'orientationchange' : 'resize',\r\n\t\tevt = 'click',\r\n\t\tbrowser = platform.name.toLowerCase(),\r\n\t\tiOS = platform.os.family == 'iOS',\r\n\t\tiOS7 = (platform.os.family == 'iOS' && parseInt(platform.os.version, 10) == 7) ? \" iOS7 \" : \"\",\r\n\t\tiOS8 = (platform.os.family == 'iOS' && parseInt(platform.os.version, 10) >= 8) ? \" iOS8 \" : \"\",\r\n\t\t$floatNav = $('#floatNav'),\r\n\t\t$navSwitch = $('#toggler'),\r\n\t\t$navLinks = $('.flyout > a'),\r\n\t\tdtl = null,\r\n\t\t// ttl = null,\r\n\t\tautoScrolling = false,\r\n\t\tforwarding = false,\r\n\t\teventhandler = function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t};\r\n\r\n\t// console.log(isTouch);\r\n\tdocument.documentElement.className += ' ' + browser;\r\n\tif (iOS) {\r\n\t\tdocument.documentElement.className += ' iOS ' + iOS7 + iOS8 + platform.product.toLowerCase();\r\n\t}\r\n\r\n\t$myWindow.on('orientationchange resize',updateViewportSize).on('scroll',updateScrollPosition);\r\n\r\n\t$myDocument.on('touchmovetoggle', function(e, arg) {\r\n\t\te.stopPropagation();\r\n\t\tif (arg) {\r\n\t\t\t$myDocument.bind('touchmove', eventhandler);\r\n\t\t} else {\r\n\t\t\t$myDocument.unbind('touchmove', eventhandler);\r\n\t\t}\r\n\t});\r\n\r\n\t$myWindow.on('updateautoscroll', function(e, arg) {\r\n\t\t// console.log('autoscrolling: ' +arg);\r\n\t\tif (arg) {\r\n\t\t\tautoScrolling = true;\r\n\t\t} else {\r\n\t\t\tautoScrolling = false;\r\n\t\t}\r\n\t});\r\n\r\n\tfunction updateViewportSize() {\r\n\t\tvWidth = $myWindow.width();\r\n\t\tvHeight = $myWindow.height();\r\n\t}\r\n\r\n\tfunction updateScrollPosition() {\r\n\t\tvScrollTop = $myWindow.scrollTop();\r\n\t\tif (!forwarding) {\r\n\t\t\t$myWindow.trigger('updateautoscroll', [ false ]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction isScrolledIntoView(elem) {\r\n\t\tvar $el = elem instanceof jQuery ? elem : $(elem);\r\n\t\tvar variant = Math.floor( vHeight / 4 );\r\n\r\n\t\tvar docViewTop = vScrollTop + variant;\r\n\t\tvar elemTop = $el.offset().top;\r\n\t\tvar elemBottom = elemTop + $el.height() - (variant*2);\r\n\r\n\t\treturn ((docViewTop >= elemTop) && (docViewTop <= elemBottom));\r\n\t}\r\n\r\n\t$(document).foundation();\r\n\r\n\t$navSwitch.on(evt, function(e) {\r\n\t\te.stopPropagation();\r\n\t\t$floatNav.toggleClass('open');\r\n\t\treturn false;\r\n\t})\r\n\r\n\t$forwardlinks.each(function(i) {\r\n\t\tvar $this = $(this);\r\n\t\t$this.on(evt, function(e) {\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t// flag autoScrolling to true\r\n\t\t\t$myWindow.trigger('updateautoscroll', [ true ]);\r\n\t\t\tforwarding = true;\r\n\t\t\tcurPanel = i+1;\r\n\t\t\tscrollPos = i+1 == panelTotal ? 0 : $panels.eq(i+1)[0].offsetTop;\r\n\t\t\t// TweenLite.to(window, 0.8, {scrollTo:{y:scrollPos}, onComplete: function() {\r\n\t\t\t// \t$myWindow.trigger('updateautoscroll', [ false ]);\r\n\t\t\t// \tforwarding = false;\r\n\t\t\t// }, ease:Power2.easeInOut});\r\n\r\n\t\t\t$('html,body').animate(\r\n\t\t\t\t{\r\n\t\t\t\t\tscrollTop: scrollPos\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tduration: 500,\r\n\t\t\t\t\tqueue: false,\r\n\t\t\t\t\tdone: function() {\r\n\t\t\t\t\t\t$myWindow.trigger('updateautoscroll', [ false ]);\r\n\t\t\t\t\t\tforwarding = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\r\n\t\t\treturn false;\r\n\t\t})\r\n\t});\r\n\r\n\t$('.lavanav').lavanav();\r\n\r\n\tvar driveSlider = (function() {\r\n\t\tvar $panel = $('#driveoflife'),\r\n\t\t\t$driveSlider = $('#mainslider'),\r\n\t\t\t$slides = $('.slides',$driveSlider).css('opacity',0),\r\n\t\t\tslidesLoaded = false,\r\n\t\t\t$preloader = $panel.find('.preloader'),\r\n\t\t\t$cue = $panel.find('.cue');\r\n\r\n\t\tvar driveSliderInstance = $driveSlider.flexslider({\r\n\t\t\tanimation: 'slide',\r\n\t\t\tanimationLoop: true,\r\n\t\t\tslideshow: false,\r\n\t\t\tallowOneSlide: false,\r\n\t\t\tuseCSS: true,\r\n\t\t\tstart: function(slider) {\r\n\t\t\t\tif (!slidesLoaded) {\r\n\t\t\t\t\t$(document).foundation('interchange', 'reflow');\r\n\t\t\t\t}\r\n\t\t\t}, after: function() {\r\n\t\t\t\tif ($cue.is(':visible')) {\r\n\t\t\t\t\t$cue.fadeOut(450);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// ,\r\n\t\t\t// after: function(slider) {\r\n\t\t\t// \tif (!slidesLoaded) {\r\n\t\t\t// \t\tconsole.log('after run');\r\n\t\t\t// \t\t$preloader.addClass('loading');\r\n\t\t\t// \t\tslidesLoaded = true;\r\n\t\t\t// \t\t$.get('slides.html')\r\n\t\t\t// \t\t\t.done(function(data) {\r\n\t\t\t// \t\t\t\t$(data).children().each(function() {\r\n\t\t\t// \t\t\t\t\tslider.addSlide(this);\r\n\t\t\t// \t\t\t\t});\r\n\t\t\t// \t\t\t\t$(document).foundation('interchange', 'reflow');\r\n\t\t\t// \t\t\t\t$slides.css('opacity',1);\r\n\t\t\t// \t\t\t\t$preloader.addClass('loaded');\r\n\t\t\t// \t\t\t\t$myWindow.off('.loadslides');\r\n\t\t\t// \t\t\t\t$('#mainslider .flex-direction-nav a').off('.loadslides');\r\n\t\t\t// \t\t\t});\r\n\t\t\t// \t}\r\n\t\t\t// }\r\n\t\t});\r\n\r\n\t\tif (isTouch) {\r\n\t\t\tloadDriveSlider();\r\n\t\t}\r\n\t\t$myWindow.on('updateautoscroll.loadslides', loadDriveSlider);\r\n\r\n\t\t$('#mainslider .flex-direction-nav').on(evt+'.loadslides', 'a', function(e) {\r\n\t\t\te.stopPropagation();\r\n\t\t\tvar $this = $(this);\r\n\t\t\tif (!slidesLoaded) {\r\n\t\t\t\t// console.log('click loading initiated...');\r\n\t\t\t\t$preloader.addClass('loading');\r\n\t\t\t\tslidesLoaded = true;\r\n\t\t\t\t$.get('slides.html')\r\n\t\t\t\t\t\t.done(function(data) {\r\n\t\t\t\t\t\t\t$(data).children().each(function() {\r\n\t\t\t\t\t\t\t\tdriveSliderInstance.data('flexslider').addSlide(this);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tvar pos = ($this.hasClass('flex-next')) ? 1 : $(data).children().length;\r\n\r\n\t\t\t\t\t\t\t$(document).foundation('interchange', 'reflow');\r\n\t\t\t\t\t\t\t$slides.css('opacity',1);\r\n\t\t\t\t\t\t\t$preloader.addClass('loaded');\r\n\t\t\t\t\t\t\tdriveSliderInstance.data('flexslider').flexAnimate(pos, true);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t$(this).off('.loadslides');\r\n\t\t\t\t$myWindow.off('.loadslides');\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tfunction loadDriveSlider() {\r\n\t\t\tif (isScrolledIntoView($panel) && !slidesLoaded && isTouch && !autoScrolling) {\r\n\t\t\t\t// console.log('loading started...');\r\n\t\t\t\t$preloader.addClass('loading');\r\n\t\t\t\tslidesLoaded = true;\r\n\t\t\t\t$.get('slides.html')\r\n\t\t\t\t\t\t.done(function(data) {\r\n\t\t\t\t\t\t\t$(data).children().each(function() {\r\n\t\t\t\t\t\t\t\tdriveSliderInstance.data('flexslider').addSlide(this);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t$(document).foundation('interchange', 'reflow');\r\n\t\t\t\t\t\t\t$slides.css('opacity',1);\r\n\t\t\t\t\t\t\t$preloader.addClass('loaded');\r\n\t\t\t\t\t\t\t$cue.fadeIn(450);\r\n\r\n\t\t\t\t\t\t\t$myWindow.off('.loadslides');\r\n\t\t\t\t\t\t\t$('#mainslider .flex-direction-nav a').off('.loadslides');\r\n\t\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t})();\r\n\r\n\tif (!isTouch) {\r\n\t\t// Desktop only code\r\n\t\t$displayPanes.each(function() {\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\toverlay = $('.text-wrap',$this);\r\n\r\n\t\t\t$this.hover(function() {\r\n\t\t\t\tTweenLite.to(overlay, 0.4, {css:{opacity:0, scale:1.5}, ease:Power2.easeInOut});\r\n\t\t\t}, function() {\r\n\t\t\t\tTweenLite.to(overlay, 0.4, {css:{opacity:1, scale:1}, ease:Power2.easeInOut});\r\n\t\t\t});\r\n\t\t});\r\n\t} else {\r\n\t\t// Touch enabled devices\r\n\r\n\t\tvar displaySlider = (function() {\r\n\t\t\tvar $panel = $('#display'),\r\n\t\t\t\t$popupTrigger = $('.overlay', $panel),\r\n\t\t\t\t$popup = $('.popup', $panel),\r\n\t\t\t\t$card = $('.card', $popup).css('visibility','hidden'),\r\n\t\t\t\t$closeBtn = $('.close', $popup),\r\n\t\t\t\t$close = $closeBtn.add($popup),\r\n\t\t\t\t$cue = $('.cue', $popup),\r\n\t\t\t\t$displaySlider = $('.popupslider', $panel),\r\n\t\t\t\tpos = 0,\r\n\t\t\t\tdisplaySliderInstance = null;\r\n\r\n\t\t\thideDisplaySlider();\r\n\r\n\t\t\t$myWindow.on('scroll', hideDisplaySlider);\r\n\r\n\t\t\tfunction hideDisplaySlider() {\r\n\t\t\t\tif (!isScrolledIntoView($panel)) {\r\n\t\t\t\t\t$popup.fadeOut(450);\r\n\t\t\t\t\t$myDocument.trigger('touchmovetoggle', [ false ]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t$popupTrigger.each(function(index) {\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\t$this.on(evt, function(e) {\r\n\t\t\t\t\tpos = index;\r\n\t\t\t\t\t$popup.fadeIn(450);\r\n\t\t\t\t\t$myDocument.trigger('touchmovetoggle', [ true ]);\r\n\t\t\t\t\tif (displaySliderInstance == null) {\r\n\t\t\t\t\t\tdisplaySliderInstance = $displaySlider.flexslider({\r\n\t\t\t\t\t\t\tanimation: 'slide',\r\n\t\t\t\t\t\t\tcontrolNav: false,\r\n\t\t\t\t\t\t\tdirectionNav: false,\r\n\t\t\t\t\t\t\tanimationLoop: true,\r\n\t\t\t\t\t\t\tslideshow: false,\r\n\t\t\t\t\t\t\tstartAt: pos,\r\n\t\t\t\t\t\t\tstart: function() {\r\n\t\t\t\t\t\t\t\t$card.css('visibility','visible');\r\n\t\t\t\t\t\t\t\tvar slides = $displaySlider.find('ul.slides'),\r\n\t\t\t\t\t\t\t\t\tdistance = slides.height()/2;\r\n\t\t\t\t\t\t\t\tslides.css('margin-top', '-'+distance+'px');\r\n\t\t\t\t\t\t\t\t$closeBtn.css({\r\n\t\t\t\t\t\t\t\t\t'margin-top': '-'+(distance - 10)+'px',\r\n\t\t\t\t\t\t\t\t\t'margin-right': '-'+(slides.find('.dis-pane:first').width()/2 - 10)+'px'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tafter: function() {\r\n\t\t\t\t\t\t\t\t$cue.fadeOut(250);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// console.log('already initiated.');\r\n\t\t\t\t\t\tdisplaySliderInstance.data('flexslider').flexAnimate(pos, true);\r\n\t\t\t\t\t\tvar slides = $displaySlider.find('ul.slides'),\r\n\t\t\t\t\t\t\tdistance = slides.height()/2;\r\n\t\t\t\t\t\tslides.css('margin-top', '-'+distance+'px');\r\n\t\t\t\t\t\t$closeBtn.css({\r\n\t\t\t\t\t\t\t'margin-top': '-'+(distance - 10)+'px',\r\n\t\t\t\t\t\t\t'margin-right': '-'+(slides.find('.dis-pane:first').width()/2 - 10)+'px'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\t$close.on(evt, function(e) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tif ($(e.target).is('span.close') || $(e.target).is('div.flex-viewport')) {\r\n\t\t\t\t\t$popup.fadeOut(450);\r\n\t\t\t\t\t$myDocument.trigger('touchmovetoggle', [ false ]);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t})();\r\n\t}\r\n\r\n\tvar carslider = (function() {\r\n\t\tvar carsloaded = false,\r\n\t\t\t$carHolder = $('#cars'),\r\n\t\t\t$carpark = $('#carpark'),\r\n\t\t\t$preloader = $carHolder.find('.preloader'),\r\n\t\t\t$modelSwitcher = $('#modelSwitch').find('a.carswitch'),\r\n\t\t\tcurCarModel = 'hatch',\r\n\t\t\toldCarModel = '',\r\n\t\t\t$cars = $(),\r\n\t\t\tcurCarPos = 0;\r\n\r\n\t\tvar $sl = $('#viewSlider').slider({\r\n\t\t\t\tmax: 99\r\n\t\t\t}).on('slide', function ( event, ui ) {\r\n\t\t\t\tcurCarPos = Math.floor(ui.value / 25);\r\n\t\t\t\t$cars.removeClass('active').eq(curCarPos).addClass('active');\r\n\t\t\t}).on('slidestart', function(event, ui) {\r\n\t\t\t\tif (!carsloaded) {\r\n\t\t\t\t\tloadCarImg(curCarModel);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t$modelSwitcher.on(evt, function() {\r\n\t\t\tcurCarModel = this.hash.slice(1);\r\n\r\n\t\t\tif (curCarModel != oldCarModel) {\r\n\t\t\t\tloadCarImg(curCarModel);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tfunction loadCarImg(carModel) {\r\n\t\t\t// temporarily disable the slider and display loading animation\r\n\t\t\t$sl.slider('disable');\r\n\t\t\t$preloader.addClass('loading');\r\n\r\n\t\t\toldCarModel = carModel;\r\n\t\t\t// retrieve car images\r\n\t\t\tif (!carsloaded) {\r\n\t\t\t\tcarsloaded = true;\r\n\t\t\t\t$.get('cars.html')\r\n\t\t\t\t\t.done(function(data) {\r\n\t\t\t\t\t\tvar $data = $('<div>' + data + '</div>');\r\n\r\n\t\t\t\t\t\t// load images into DOM\r\n\t\t\t\t\t\t$cars = $('img', $data).appendTo($carpark).invisible().filter('.'+carModel).visible().eq(0).addClass('active').end();\r\n\r\n\t\t\t\t\t\t// hide initial image/loading animation, re-enable the slider\r\n\t\t\t\t\t\t$preloader.addClass('loaded');\r\n\t\t\t\t\t\t$sl.slider('enable');\r\n\t\t\t\t\t\t$sl.slider({value:0});\r\n\r\n\t\t\t\t\t\t$(document).foundation('interchange', 'reflow');\r\n\t\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t$cars.removeClass('active').invisible();\r\n\t\t\t\t$cars = $('.'+carModel, $carpark).visible().eq(curCarPos).addClass('active').end();\r\n\t\t\t\t$sl.slider('enable');\r\n\t\t\t\t// $sl.slider({value:curCarPos});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t})();\r\n\r\n\tvar dashSlider = (function() {\r\n\t\tvar $panel = $('#dashboard'),\r\n\t\t\t// $infograph = $panel.find('.infograph'),\r\n\t\t\t$bubbles = $panel.find('.bubble'),\r\n\t\t\t$popup = $panel.find('.popup'),\r\n\t\t\t$card = $popup.find('.card').css('visibility','hidden'),\r\n\t\t\t$closeBtn = $popup.find('.close'),\r\n\t\t\t$close = $closeBtn.add($popup),\r\n\t\t\t$cue = $popup.find('.cue'),\r\n\t\t\t$dashSlider = $panel.find('.popupslider'),\r\n\t\t\tpos = 0,\r\n\t\t\tdashSliderInstance = null,\r\n\t\t\tstageReady = false;\r\n\r\n\t\t\tdtl = new TimelineLite({\r\n\t\t\t\tpaused: true,\r\n\t\t\t\tonComplete: completeHandler,\r\n\t\t\t\tonReverseComplete : reverseCompleteHandler\r\n\t\t\t});\r\n\r\n\t\t\tdtl.staggerTo($bubbles, 0.5, {autoAlpha:1, scale:1.15, ease:Elastic.easeIn}, 0.3 );\r\n\t\t\tdtl.staggerTo($bubbles, 0.1, {scale:1, ease:Elastic.easeOut}, 0.3, '-=0.6');\r\n\r\n\t\tprepareDashStage();\r\n\r\n\t\t$myWindow.on('updateautoscroll', prepareDashStage);\r\n\r\n\t\tfunction completeHandler() {\r\n\t\t\tstageReady = true;\r\n\t\t}\r\n\r\n\t\tfunction reverseCompleteHandler() {\r\n\t\t\tthis.timeScale(1);\r\n\t\t}\r\n\r\n\t\tfunction prepareDashStage() {\r\n\t\t\tif (autoScrolling) {\r\n\t\t\t\t// if in autoscroll mode, kill the tween and reset playhead back to 0\r\n\t\t\t\tif (dtl.isActive() || dtl.progress() == 1) {\r\n\t\t\t\t\tdtl.kill();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (isScrolledIntoView($panel)) {\r\n\t\t\t\t\tif (!stageReady) {\r\n\t\t\t\t\t\t// console.log('started preparing stage');\r\n\t\t\t\t\t\tdtl.play();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (stageReady) {\r\n\t\t\t\t\t\t// console.log('started clearing stage');\r\n\t\t\t\t\t\t// $infograph.removeClass('shown');\r\n\t\t\t\t\t\t// $bubbles.removeClass('active');\r\n\t\t\t\t\t\t// if (dtl.progress() != 0) {\r\n\t\t\t\t\t\t// \tdtl.timeScale(2);\r\n\t\t\t\t\t\t// \tdtl.reverse();\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t$popup.fadeOut(450);\r\n\t\t\t\t\t\t$myDocument.trigger('touchmovetoggle', [ false ]);\r\n\t\t\t\t\t\tstageReady = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$bubbles.each(function(index) {\r\n\t\t\tvar $this = $(this);\r\n\t\t\t$this.on(evt, function() {\r\n\t\t\t\tpos = index;\r\n\t\t\t\t// $bubbles.removeClass('active').filter($this).addClass('active');\r\n\t\t\t\t$popup.fadeIn(450);\r\n\t\t\t\t// disable vertical swipe\r\n\t\t\t\t$myDocument.trigger('touchmovetoggle', [ true ]);\r\n\r\n\t\t\t\tif (dashSliderInstance == null) {\r\n\t\t\t\t\tdashSliderInstance = $dashSlider.flexslider({\r\n\t\t\t\t\t\tanimation: 'slide',\r\n\t\t\t\t\t\tcontrolNav: false,\r\n\t\t\t\t\t\tdirectionNav: true,\r\n\t\t\t\t\t\tanimationLoop: true,\r\n\t\t\t\t\t\tslideshow: false,\r\n\t\t\t\t\t\tstartAt: pos,\r\n\t\t\t\t\t\tstart: function(slider) {\r\n\t\t\t\t\t\t\t$card.css('visibility','visible');\r\n\t\t\t\t\t\t\tvar slides = $dashSlider.find('ul.slides'),\r\n\t\t\t\t\t\t\t\tdistance = slides.height()/2;\r\n\t\t\t\t\t\t\tslides.css('margin-top', '-'+distance+'px');\r\n\t\t\t\t\t\t\t$closeBtn.css({\r\n\t\t\t\t\t\t\t\t'margin-top': '-'+(distance - 10)+'px',\r\n\t\t\t\t\t\t\t\t'margin-right': '-'+(slides.find('.dis-pane:first').width()/2 - 10)+'px'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tafter: function(slider) {\r\n\t\t\t\t\t\t\t$cue.fadeOut(250);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdashSliderInstance.data('flexslider').flexAnimate(pos, true);\r\n\t\t\t\t\tvar slides = $dashSlider.find('ul.slides'),\r\n\t\t\t\t\t\tdistance = slides.height()/2;\r\n\t\t\t\t\tslides.css('margin-top', '-'+distance+'px');\r\n\t\t\t\t\t$closeBtn.css({\r\n\t\t\t\t\t\t'margin-top': '-'+(distance - 10)+'px',\r\n\t\t\t\t\t\t'margin-right': '-'+(slides.find('.dis-pane:first').width()/2 - 10)+'px'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t$close.on(evt, function(e) {\r\n\t\t\te.stopPropagation();\r\n\t\t\tif ($(e.target).is('span.close') || $(e.target).is('div.flex-viewport')) {\r\n\t\t\t\t// $bubbles.removeClass('active');\r\n\t\t\t\t$popup.fadeOut(450);\r\n\t\t\t\t// re-enable vertical swipe\r\n\t\t\t\t$myDocument.trigger('touchmovetoggle', [ false ]);\r\n\t\t\t}\r\n\t\t\t// return false;\r\n\t\t});\r\n\t})();\r\n\r\n\tvar hardwareSlider = (function() {\r\n\t\tvar $lnks = $('#hardwareSwitch').find('a'),\r\n\t\t\t$items = $('#hardware').find('.item'),\r\n\t\t\ttarget,\r\n\t\t\toldTarget = 0,\r\n\t\t\tdisclaimer = '',\r\n\t\t\tdisclaimer2 = '',\r\n\t\t\t$extra = $('#extra'),\r\n\t\t\tstageReady = false,\r\n\t\t\t$panel = $('#skyactiv'),\r\n\t\t\t$popupTrigger = $panel.find('.bubble'),\r\n\t\t\t$popup = $panel.find('.popup'),\r\n\t\t\t$card = $popup.find('.card').css('visibility','hidden'),\r\n\t\t\t$closeBtn = $popup.find('.close'),\r\n\t\t\t$close = $closeBtn.add($popup),\r\n\t\t\t$cue = $popup.find('.cue'),\r\n\t\t\t$hardwareSlider = $panel.find('.popupslider'),\r\n\t\t\tpos = 0,\r\n\t\t\thardwareSliderInstance = null,\r\n\t\t\thtls = [];\r\n\r\n\t\t$items.each(function(i) {\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\timgs = $this.find('img.base'),\r\n\t\t\t\timgTotal = imgs.length,\r\n\t\t\t\tbubbles = $this.find('.bubble'),\r\n\t\t\t\tbubTotal = bubbles.length,\r\n\t\t\t\tinfograph = $this.find('.infograph');\r\n\r\n\t\t\tvar childTl = new TimelineLite({\r\n\t\t\t\t\t\t\t\tpaused: true,\r\n\t\t\t\t\t\t\t\tonComplete: completeHandler,\r\n\t\t\t\t\t\t\t\tonCompleteParams: [ bubbles ],\r\n\t\t\t\t\t\t\t\tonReverseComplete: reverseCompleteHandler\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\tif (!iOS || parseInt(platform.os.version, 10) != 7 || platform.product.toLowerCase() != 'iphone') {\r\n\t\t\t\tif (imgTotal > 1) {\r\n\t\t\t\t\tchildTl.staggerTo(imgs, .4, {autoAlpha:1, scale:1}, 0.3);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tchildTl.to(imgs, .4, {autoAlpha:1, scale:1});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (bubTotal > 1) {\r\n\t\t\t\tchildTl.staggerTo(bubbles, 0.4, {autoAlpha:1, scale:1.15, ease:Elastic.easeIn}, 0.3);\r\n\t\t\t\tchildTl.staggerTo(bubbles, 0.1, {scale:1, ease:Elastic.easeOut}, 0.3);\r\n\t\t\t\tif (!isTouch || vWidth >= 768) {\r\n\t\t\t\t\tchildTl.staggerTo(infograph, 0.2, {autoAlpha:1}, 0.3);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tchildTl.add( TweenLite.to(bubbles, 0.4, {autoAlpha:1, scale:1.15, ease:Elastic.easeIn}) );\r\n\t\t\t\tchildTl.add( TweenLite.to(bubbles, 0.1, {scale:1, ease:Elastic.easeOut, delay:0.3}) );\r\n\t\t\t\tif (!isTouch || vWidth >= 768) {\r\n\t\t\t\t\tchildTl.add( TweenLite.to(infograph, 0.2, {autoAlpha:1}, 0.3) );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\thtls.push(childTl);\r\n\t\t});\r\n\r\n\t\tfunction completeHandler(bubbles) {\r\n\t\t\tbubbles.addClass('active');\r\n\t\t\tstageReady = true;\r\n\t\t}\r\n\r\n\t\tfunction reverseCompleteHandler() {\r\n\t\t\tthis.timeScale(1);\r\n\t\t\tthis.kill();\r\n\t\t\tif (typeof target != 'undefined') {\r\n\t\t\t\t// if orientationchange happened before click, target wouldn't have been set yet\r\n\t\t\t\t$items.removeClass('active').eq(target).addClass('active');\r\n\t\t\t}\r\n\t\t\thtls[target].play();\r\n\t\t}\r\n\r\n\t\tprepareHardwareStage();\r\n\r\n\t\t$myWindow.on('updateautoscroll', prepareHardwareStage);\r\n\r\n\t\tfunction prepareHardwareStage() {\r\n\t\t\tif (autoScrolling) {\r\n\t\t\t\t// is in autoscroll mode, kill the current tween and reset the playhead back to 0\r\n\t\t\t\tfor (var i = 0, len = htls.length; i < len; i++) {\r\n\t\t\t\t\tif (htls[i].isActive() || htls[i].progress() == 1) {\r\n\t\t\t\t\t\thtls[i].kill();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// htls[oldTarget].kill();\r\n\t\t\t} else {\r\n\t\t\t\tif (isScrolledIntoView($('#skyactiv'))) {\r\n\t\t\t\t\tif (!stageReady) {\r\n\t\t\t\t\t\t// console.log('panel in view, animation starts...');\r\n\t\t\t\t\t\thtls[oldTarget].play();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (stageReady) {\r\n\t\t\t\t\t\t// console.log('panel out of view, animation reverts...');\r\n\t\t\t\t\t\t// if (htls[oldTarget].progress() != 0) {\r\n\t\t\t\t\t\t// \thtls[oldTarget].reverse();\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t$popup.fadeOut(450);\r\n\t\t\t\t\t\t$myDocument.trigger('touchmovetoggle', [ false ]);\r\n\t\t\t\t\t\tstageReady = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$lnks.each(function(i) {\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\tt = this.hash.slice(1);\r\n\r\n\t\t\t$this.on(evt, function(e) {\r\n\t\t\t\te.stopPropagation();\r\n\r\n\t\t\t\tdisclaimer = $('#'+t).data('disclaimer') == undefined ? \"\" : $('#'+t).data('disclaimer');\r\n\t\t\t\tdisclaimer2 = $('#'+t).data('disclaimer-more') == undefined ? \"\" : $('#'+t).data('disclaimer-more');\r\n\r\n\t\t\t\ttarget = i;\r\n\t\t\t\tif (target != oldTarget) {\r\n\t\t\t\t\thtls[oldTarget].timeScale(3);\r\n\t\t\t\t\thtls[oldTarget].reverse();\r\n\r\n\t\t\t\t\toldTarget = target;\r\n\t\t\t\t\t// htls[target].delay(1).play();\r\n\t\t\t\t\t$extra.empty().append(disclaimer);\r\n\t\t\t\t\tif (disclaimer2 != \"\") {\r\n\t\t\t\t\t\tdisclaimer2 = '<br />' + disclaimer2;\r\n\t\t\t\t\t\t$extra.append(disclaimer2);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t})\r\n\t\t});\r\n\r\n\t\tif (isTouch) {\r\n\t\t\t$popupTrigger.each(function(index) {\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\t$this.on(evt, function(e) {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tswitch (index) {\r\n\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\tpos = 0;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\tpos = 1;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\tpos = 2;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\tpos = 3;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\tpos = 4;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 5:\r\n\t\t\t\t\t\t\tpos = 6;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tpos = 0;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (vWidth < 1024) {\r\n\t\t\t\t\t\t$popup.fadeIn(450);\r\n\t\t\t\t\t\t$myDocument.trigger('touchmovetoggle', [ true ]);\r\n\r\n\t\t\t\t\t\tif (hardwareSliderInstance == null) {\r\n\t\t\t\t\t\t\thardwareSliderInstance = $hardwareSlider.flexslider({\r\n\t\t\t\t\t\t\t\tanimation: 'slide',\r\n\t\t\t\t\t\t\t\tcontrolNav: false,\r\n\t\t\t\t\t\t\t\tdirectionNav: false,\r\n\t\t\t\t\t\t\t\tanimationLoop: true,\r\n\t\t\t\t\t\t\t\tslideshow: false,\r\n\t\t\t\t\t\t\t\tstartAt: pos,\r\n\t\t\t\t\t\t\t\tstart: function() {\r\n\t\t\t\t\t\t\t\t\t$card.css('visibility','visible');\r\n\t\t\t\t\t\t\t\t\tvar slides = $hardwareSlider.find('ul.slides'),\r\n\t\t\t\t\t\t\t\t\t\tdistance = slides.height()/2;\r\n\t\t\t\t\t\t\t\t\tslides.css('margin-top', '-'+distance+'px');\r\n\t\t\t\t\t\t\t\t\t$closeBtn.css({\r\n\t\t\t\t\t\t\t\t\t\t'margin-top': '-'+(distance - 10)+'px',\r\n\t\t\t\t\t\t\t\t\t\t'margin-right': '-'+(slides.find('.dis-pane:first').width()/2 - 10)+'px'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tafter: function() {\r\n\t\t\t\t\t\t\t\t\t$cue.fadeOut(250);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\thardwareSliderInstance.data('flexslider').flexAnimate(pos, true);\r\n\t\t\t\t\t\t\tvar slides = $hardwareSlider.find('ul.slides'),\r\n\t\t\t\t\t\t\t\tdistance = slides.height()/2;\r\n\t\t\t\t\t\t\tslides.css('margin-top', '-'+distance+'px');\r\n\t\t\t\t\t\t\t$closeBtn.css({\r\n\t\t\t\t\t\t\t\t'margin-top': '-'+(distance - 10)+'px',\r\n\t\t\t\t\t\t\t\t'margin-right': '-'+(slides.find('.dis-pane:first').width()/2 - 10)+'px'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\t$close.on(evt, function(e) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tif ($(e.target).is('span.close') || $(e.target).is('div.flex-viewport')) {\r\n\t\t\t\t\t$popup.fadeOut(450);\r\n\t\t\t\t\t$myDocument.trigger('touchmovetoggle', [ false ]);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t})();\r\n\r\n\tvar technologySlider = (function() {\r\n\t\tvar $lnks = $('#techSwitch').find('a'),\r\n\t\t\t$items = $('#technology').find('.item'),\r\n\t\t\t$baseImgs = $('#technology').find('img.base'),\r\n\t\t\ttarget,\r\n\t\t\toldTarget = 0,\r\n\t\t\tstageReady = false,\r\n\t\t\tcarloaded = false,\r\n\t\t\t$panel = $('#activsense'),\r\n\t\t\t$bubbles = $panel.find('.bubble'),\r\n\t\t\t$popup = $panel.find('.popup'),\r\n\t\t\t$card = $popup.find('.card').css('visibility','hidden'),\r\n\t\t\t$closeBtn = $popup.find('.close'),\r\n\t\t\t$close = $closeBtn.add($popup),\r\n\t\t\t$cue = $popup.find('.cue'),\r\n\t\t\t$techSlider = $panel.find('.popupslider'),\r\n\t\t\tpos = 0,\r\n\t\t\ttechSliderInstance = null,\r\n\t\t\tcarTween = null,\r\n\t\t\tttls = [],\r\n\t\t\tttlsBub = [];\r\n\r\n\t\t$items.each(function(i) {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tif (!isTouch) {\r\n\t\t\t\t// prepare infograph tweens for desktop\r\n\t\t\t\tvar infograph = $this.find('.infograph');\r\n\r\n\t\t\t\tvar childTl = new TimelineLite({\r\n\t\t\t\t\t\t\t\t\tpaused: true,\r\n\t\t\t\t\t\t\t\t\tonComplete: completeHandler,\r\n\t\t\t\t\t\t\t\t\tonReverseComplete: reverseCompleteHandler\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\tchildTl.staggerTo(infograph, 0.4, {autoAlpha:1}, 0.3);\r\n\r\n\t\t\t\tttls.push(childTl);\r\n\t\t\t} else {\r\n\t\t\t\tvar bubbles = $this.find('.bubble'),\r\n\t\t\t\tbubTotal = bubbles.length;\r\n\r\n\t\t\t\tvar bubChildTl = new TimelineLite({\r\n\t\t\t\t\t\t\t\t\t\tpaused: true,\r\n\t\t\t\t\t\t\t\t\t\tonComplete: completeHandler,\r\n\t\t\t\t\t\t\t\t\t\tonReverseComplete: bubReverseCompleteHandler\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\tif (bubTotal > 1) {\r\n\t\t\t\t\tbubChildTl.staggerTo(bubbles, 0.4, {autoAlpha:1, scale:1.15, ease:Elastic.easeIn}, 0.3);\r\n\t\t\t\t\tbubChildTl.staggerTo(bubbles, 0.1, {scale:1, ease:Elastic.easeOut}, 0.3);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbubChildTl.add( TweenLite.to(bubbles, 0.4, {autoAlpha:1, scale:1.15, ease:Elastic.easeIn}) );\r\n\t\t\t\t\tbubChildTl.add( TweenLite.to(bubbles, 0.1, {scale:1, ease:Elastic.easeOut, delay:0.3}) );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tttlsBub.push(bubChildTl);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfunction completeHandler() {\r\n\t\t\tstageReady = true;\r\n\t\t}\r\n\r\n\t\tfunction reverseCompleteHandler() {\r\n\t\t\tthis.timeScale(1);\r\n\t\t\tthis.kill();\r\n\t\t\tif (typeof target != 'undefined') {\r\n\t\t\t\t// if orientationchange happened before click, target wouldn't have been set yet\r\n\t\t\t\t$items.removeClass('active').eq(target).addClass('active');\r\n\t\t\t}\r\n\t\t\tttls[target].play();\r\n\t\t}\r\n\r\n\t\tfunction bubReverseCompleteHandler() {\r\n\t\t\tthis.timeScale(1);\r\n\t\t\tthis.kill();\r\n\t\t\tif (typeof target != 'undefined') {\r\n\t\t\t\t// if orientationchange happened before click, target wouldn't have been set yet\r\n\t\t\t\t$items.removeClass('active').eq(target).addClass('active');\r\n\t\t\t}\r\n\t\t\tttlsBub[target].play();\r\n\t\t}\r\n\r\n\t\tprepareTechStage();\r\n\r\n\t\t$myWindow.on('updateautoscroll', prepareTechStage);\r\n\r\n\t\tfunction prepareTechStage() {\r\n\t\t\tif (autoScrolling) {\r\n\t\t\t\tif (!isTouch) {\r\n\t\t\t\t\tfor (var i = 0, len = ttls.length; i < len; i++) {\r\n\t\t\t\t\t\tif (ttls[i].isActive() || ttls[i].progress() == 1) {\r\n\t\t\t\t\t\t\tttls[i].kill();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (var i = 0, len = ttlsBub.length; i < len; i++) {\r\n\t\t\t\t\t\tif (ttlsBub[i].isActive() || ttlsBub[i].progress() == 1) {\r\n\t\t\t\t\t\t\tttlsBub[i].kill();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (isScrolledIntoView($panel)) {\r\n\t\t\t\t\tif (!stageReady) {\r\n\t\t\t\t\t\t// console.log('started preparing stage');\r\n\t\t\t\t\t\tif (!carloaded && (!iOS || parseInt(platform.os.version, 10) != 7 || platform.product.toLowerCase() != 'iphone')) {\r\n\t\t\t\t\t\t\tcarTween = TweenLite.to($baseImgs, 0.4, {autoAlpha:1, scale:1, ease:Power2.easeInOut});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!isTouch) {\r\n\t\t\t\t\t\t\tttls[oldTarget].delay(1).play();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tttlsBub[oldTarget].play();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (stageReady) {\r\n\t\t\t\t\t\t// console.log('started clearing stage');\r\n\t\t\t\t\t\tif (carTween != null && carTween.progress() == 1) {\r\n\t\t\t\t\t\t\tcarTween.kill();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// if (!isTouch) {\r\n\t\t\t\t\t\t// \tif (ttls[oldTarget].progress() != 0) {\r\n\t\t\t\t\t\t// \t\tttl.timeScale(2);\r\n\t\t\t\t\t\t// \t\tttls[oldTarget].reverse();\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// } else {\r\n\t\t\t\t\t\t// \tif (ttl.progress() != 0) {\r\n\t\t\t\t\t\t// \t\tttl.timeScale(2);\r\n\t\t\t\t\t\t// \t\tttl.reverse();\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t$popup.fadeOut(450);\r\n\t\t\t\t\t\t$myDocument.trigger('touchmovetoggle', [ false ]);\r\n\t\t\t\t\t\tstageReady = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$lnks.each(function(i) {\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\tt = this.hash.slice(1);\r\n\r\n\t\t\t$this.on(evt, function(e) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tpos = $this.parent().index();\r\n\r\n\t\t\t\ttarget = i;\r\n\t\t\t\tif (target != oldTarget) {\r\n\r\n\t\t\t\t\tif (!isTouch) {\r\n\t\t\t\t\t\tttls[oldTarget].timeScale(2);\r\n\t\t\t\t\t\tttls[oldTarget].reverse();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tttlsBub[oldTarget].timeScale(2);\r\n\t\t\t\t\t\tttlsBub[oldTarget].reverse();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\toldTarget = target;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t$close.on(evt, function(e) {\r\n\t\t\te.stopPropagation();\r\n\t\t\tif ($(e.target).is('span.close') || $(e.target).is('div.flex-viewport')) {\r\n\t\t\t\t$popup.fadeOut(450);\r\n\t\t\t\t$myDocument.trigger('touchmovetoggle', [ false ]);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tif (isTouch) {\r\n\t\t\t$bubbles.each(function(index) {\r\n\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t$this.on(evt, function(e) {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tsliderInit(index);\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction sliderInit(pos) {\r\n\t\t\t$popup.fadeIn(450);\r\n\t\t\t$myDocument.trigger('touchmovetoggle', [ true ]);\r\n\t\t\tif (techSliderInstance == null) {\r\n\t\t\t\ttechSliderInstance = $techSlider.flexslider({\r\n\t\t\t\t\tanimation: 'slide',\r\n\t\t\t\t\tcontrolNav: false,\r\n\t\t\t\t\tdirectionNav: false,\r\n\t\t\t\t\tanimationLoop: true,\r\n\t\t\t\t\tslideshow: false,\r\n\t\t\t\t\tstartAt: pos,\r\n\t\t\t\t\tstart: function() {\r\n\t\t\t\t\t\t$card.css('visibility','visible');\r\n\t\t\t\t\t\tvar slides = $techSlider.find('ul.slides'),\r\n\t\t\t\t\t\t\tdistance = slides.height()/2;\r\n\t\t\t\t\t\tslides.css('margin-top', '-'+distance+'px');\r\n\t\t\t\t\t\t$closeBtn.css({\r\n\t\t\t\t\t\t\t'margin-top': '-'+(distance - 10)+'px',\r\n\t\t\t\t\t\t\t'margin-right': '-'+(slides.find('.dis-pane:first').width()/2 - 10)+'px'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tafter: function() {\r\n\t\t\t\t\t\t$cue.fadeOut(250);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// console.log('already initiated.');\r\n\t\t\t\ttechSliderInstance.data('flexslider').flexAnimate(pos, true);\r\n\t\t\t\tvar slides = $techSlider.find('ul.slides'),\r\n\t\t\t\t\tdistance = slides.height()/2;\r\n\t\t\t\tslides.css('margin-top', '-'+distance+'px');\r\n\t\t\t\t$closeBtn.css({\r\n\t\t\t\t\t'margin-top': '-'+(distance - 10)+'px',\r\n\t\t\t\t\t'margin-right': '-'+(slides.find('.dis-pane:first').width()/2 - 10)+'px'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t})();\r\n\r\n});\r\n\r\n$.fn.lavanav = function() {\r\n\treturn this.each(function() {\r\n\t\tvar $el,\r\n\t\t\tleftPos,\r\n\t\t\tnewWidth,\r\n\t\t\tthat = $(this),\r\n\t\t\t$lnks = $('a',that);\r\n\r\n\t\tthat.append('<li class=\"lava\" />');\r\n\t\tvar $lava = $('.lava',that);\r\n\r\n\t\tif ($('a.active', that).length > 0) {\r\n\t\t\tvar $curElement = $('a.active', that).parent();\r\n\t\t\t$lava.width($curElement.width())\r\n\t\t\t\t.css('left', $curElement.position().left)\r\n\t\t\t\t.data('origLeft', $curElement.position().left)\r\n\t\t\t\t.data('origWidth', $curElement.width());\r\n\t\t} else {\r\n\t\t\t$lava.width(0).css('left', 0).data('origLeft', 0).data('origWidth', 0);\r\n\t\t}\r\n\r\n\t\t$lnks.on('click', function(e) {\r\n\t\t\te.stopPropagation();\r\n\t\t\t$lnks.removeClass('active').filter($(this)).addClass('active');\r\n\t\t\t$el = $(this).parent();\r\n\t\t\tleftPos = $el.position().left;\r\n\t\t\tnewWidth = $el.width();\r\n\t\t\t$lava.stop().animate({\r\n\t\t\t\tleft: leftPos,\r\n\t\t\t\twidth: newWidth\r\n\t\t\t},250);\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// $('a', that).hover(function() {\r\n\t\t// \t$el = $(this).parent();\r\n\t\t// \tleftPos = $el.position().left;\r\n\t\t// \tnewWidth = $el.width();\r\n\t\t// \t$lava.stop().animate({\r\n\t\t// \t\tleft: leftPos,\r\n\t\t// \t\twidth: newWidth\r\n\t\t// \t});\r\n\t\t// }, function() {\r\n\t\t// \t$lava.stop().animate({\r\n\t\t// \t\tleft: $el.data('origLeft'),\r\n\t\t// \t\twidth: $el.data('origWidth')\r\n\t\t// \t});\r\n\t\t// });\r\n\t});\r\n};\r\n$.fn.visible = function() {\r\n\treturn this.css('visibility', 'visible');\r\n};\r\n$.fn.invisible = function() {\r\n\treturn this.css('visibility', 'hidden');\r\n};\r\n"],"sourceRoot":"/source/"}